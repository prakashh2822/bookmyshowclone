<!-- HOME TEST -->
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>BookMyShow Clone</title>

    <style>

      /* LIVE BACKGROUND VIDEO */
      .bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
      filter: brightness(0.45);
      }

/* Make page content appear above video */
      body {
      background: transparent !important;
      position: relative;
      z-index: 1;
      }

    body { 
      margin: 0;
      font-family: Arial, sans-serif;
      background: transparent !important;
  }

        /* Navbar */
        .navbar {
            background: #C21807;
            padding: 14px 30px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .navbar a {
            color: white;
            text-decoration: none;
            margin-left: 20px;
            font-weight: bold;
        }
        .nav-btn {
          background: none;
          border: none;
          color: white;
          font-weight: bold;
          cursor: pointer;
          font-size: 16px;
          padding: 0;
          margin-left: 20px;
        }
        
        .nav-btn:hover {
          opacity: 0.7;
        }
        

        /* Movie Grid */
        .movie-container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
            padding: 30px;
        }

        .movie-card {
            width: 180px;
            text-align: center;
        }
        .movie-card img {
            width: 180px;
            height: 260px;
            border-radius: 10px;
            object-fit: cover;
            transition: 0.3s;
            cursor: pointer;
        }
        .movie-card img:hover {
            transform: scale(1.07);
        }
        .movie-card p {
          margin-top: 8px;
          font-size: 17px;
          font-weight: 600;
          color: #f5f5f5;
          text-shadow: 0px 0px 8px rgba(0,0,0,0.9);
          letter-spacing: 0.5px;
      }
      

        h2 { text-align:center; margin-top:30px; }
    </style>
</head>

<body>

  <!-- Background Video -->
  <video autoplay loop muted playsinline class="bg-video">
    <source src="{% static 'videos/background.mp4' %}" type="video/mp4">
  </video>
  


    <!-- NAVBAR -->
    <div class="navbar">
      <div style="font-size: 22px; font-weight: bold;">BookMyShow Clone</div>
    
      <div>
          <a href="{% url 'home' %}">Home</a>
          <a href="{% url 'my_bookings' %}">My Bookings</a>
    
          {% if user.is_authenticated %}
          <a href="{% url 'profile' %}" class="nav-btn">Profile</a>
          <form method="post" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="nav-btn">Logout ({{ user.username }})</button>
          </form>
          
          
          {% else %}
              <a href="{% url 'login' %}">Login</a>
              <a href="{% url 'register' %}">Sign Up</a>
          {% endif %}
      </div>
    </div>
    
    <div style="text-align:center; margin-top:20px;">

      <!-- City Filter -->
      <form method="get" style="display:inline-block;">
        <select name="city" onchange="this.form.submit()" style="padding:8px;border-radius:6px;">
          <option value="">City</option>
          {% for c in cities %}
          <option value="{{ c.id }}" {% if selected_city == c.id|stringformat:"s" %}selected{% endif %}>
            {{ c.name }}
          </option>
          {% endfor %}
        </select>
      </form>
    
      <!-- Genre Filter -->
      <select name="genre" onchange="this.form.submit()" style="padding:8px;border-radius:6px;">
        <option value="">Genre</option>
        <option value="Action" {% if selected_genre == "Action" %}selected{% endif %}>Action</option>
        <option value="Drama" {% if selected_genre == "Drama" %}selected{% endif %}>Drama</option>
        <option value="Comedy" {% if selected_genre == "Comedy" %}selected{% endif %}>Comedy</option>
        <option value="Thriller" {% if selected_genre == "Thriller" %}selected{% endif %}>Thriller</option>
        <option value="Romantic" {% if selected_genre == "Romantic" %}selected{% endif %}>Romantic</option>
      </select>
      
      <!-- Language Filter -->
      <select name="language" onchange="this.form.submit()" style="padding:8px;border-radius:6px;">
        <option value="">Language</option>
        <option value="Hindi" {% if selected_language == "Hindi" %}selected{% endif %}>Hindi</option>
        <option value="Telugu" {% if selected_language == "Telugu" %}selected{% endif %}>Telugu</option>
        <option value="Tamil" {% if selected_language == "Tamil" %}selected{% endif %}>Tamil</option>
        <option value="Kannada" {% if selected_language == "Kannada" %}selected{% endif %}>Kannada</option>
        <option value="English" {% if selected_language == "English" %}selected{% endif %}>English</option>
      </select>
      
    
      <!-- Search Form -->
      <form method="get" style="margin-top:15px;">
        <input type="text" name="search" placeholder="Search movies..." value="{{ search }}"
          style="padding:10px;width:260px;border-radius:6px;">
        <button type="submit" style="padding:10px 14px;border:none;background:#C21807;color:white;border-radius:6px;">
          Search
        </button>
      </form>
    
    </div>
    
    
    <!-- MOVIES -->
    <h2>Now Showing</h2>

    <div class="movie-container">
        {% for m in movies %}
        <div class="movie-card">
            <a href="{% url 'movie_detail' m.id %}">
                {% if m.poster %}
                    <img src="{{ m.poster.url }}">
                {% elif m.poster_url %}
                    <img src="{{ m.poster_url }}">
                {% else %}
                    <img src="https://via.placeholder.com/180x260?text=No+Image">
                {% endif %}
                <p>{{ m.title }}</p>
            </a>
        </div>
        {% endfor %}
    </div>

</body>
</html>
